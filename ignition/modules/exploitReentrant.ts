import {buildModule} from "@nomicfoundation/hardhat-ignition/modules"
import { ethers } from "hardhat"

const vulnerable =  buildModule("Vulnerable", (m) => {
    const vuln = m.contract("Vulnerable")
     m.send('Sending_Funds', vuln, ethers.parseEther("1"))
    return { vuln }
})

const exploit = buildModule("Exploit", (m) => {
    const {vuln} = m.useModule(vulnerable)

    const expl = m.contract("Exploit", [vuln])

    m.call(expl, "exploit")

    const balance = m.staticCall(expl, "showBalanceThis")

    return {expl}
})

export default exploit;